services:
  # Monitor service - provides real-time printer monitoring
  monitor:
    build:
      context: .
      dockerfile: Dockerfile
    image: bambu-monitor
    container_name: bambu-monitor
    env_file: .env
    volumes:
      - .:/app
    command: python3 monitor.py
    restart: always
    healthcheck:
      test: curl -sS http://127.0.0.1 || exit 1
      interval: 20s
      timeout: 1s
      start_period: 2s
      retries: 1